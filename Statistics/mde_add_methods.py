"""
Методы добавления эффекта MDE к выборкам данных
==============================================

Данный модуль содержит функции для трансформации выборок данных путем
добавления минимального обнаруживаемого эффекта (MDE) к различным типам статистик.

Каждая функция принимает исходную выборку (numpy.ndarray) и значение MDE в процентах,
а затем возвращает модифицированную выборку с примененным эффектом.

Основные функции модуля:
- add_effect_for_mean: Трансформирует выборку для изменения среднего значения
- add_effect_for_median: Трансформирует выборку для изменения медианы (заглушка для будущей реализации)
- get_effect_adder: Возвращает нужную функцию трансформации по имени статистики
"""

import numpy as np


def add_effect_for_mean(sample, mde_percent):
    """
    Трансформирует выборку для изменения среднего значения на заданный процент MDE.
    
    Параметры:
    sample : numpy.ndarray
        Исходная выборка данных
    mde_percent : float
        Процентное значение MDE (например, 5.0 для 5% эффекта)
        
    Возвращает:
    numpy.ndarray
        Модифицированная выборка с примененным эффектом
    """
    current_mean = np.mean(sample)
    target_mean = current_mean * (1 + mde_percent/100)
    shift = target_mean - current_mean
    
    return sample + shift


def add_effect_for_median(sample, mde_percent):
    """
    Заглушка для будущей реализации трансформации выборки для изменения медианы.
    
    Параметры:
    sample : numpy.ndarray
        Исходная выборка данных
    mde_percent : float
        Процентное значение MDE (например, 5.0 для 5% эффекта)
        
    Возвращает:
    numpy.ndarray
        Исходная выборка без изменений
    """
    # TODO: Реализовать трансформацию для медианы
    pass


# Словарь доступных методов добавления эффекта
effect_adders = {
    'mean': add_effect_for_mean,
    'median': add_effect_for_median,
}


def get_effect_adder(statistic_name):
    """
    Возвращает функцию трансформации выборки по имени статистики.
    
    Параметры:
    statistic_name : str
        Имя статистики ('mean', 'median' или другие в будущем)
        
    Возвращает:
    function
        Функция для трансформации выборки с учетом MDE
    """
    return effect_adders[statistic_name]